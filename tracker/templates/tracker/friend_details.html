{% extends 'tracker/base.html' %}
{% block title %}Friend Details{% endblock %}

{% block content %}
<div class="card shadow p-4 mt-4">
    <h2>{{ friend.name }}</h2>
    <p>Total expenses between You:₹{{ total_expenses }} </p>
        <a href="{% url 'add_expense_with_friend' friend.id %}" class="btn btn-primary mb-3">Add Expense</a>   
    <h4>Expense List</h4>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Date</th>
                <th>Title</th>
                <th>Category</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Paid By</th>
                <th>Debts</th>
            </tr>
        </thead>
        <tbody>
            {% for expense in expenses %}
                <tr>
                    <td>{{ expense.date }}</td>
                    <td>{{ expense.title }}</td>
                    <td>{{ expense.category }}</td>
                    <td>{{ expense.description }}</td>
                    <td>₹{{ expense.amount }}</td>
                    <td>{{ expense.paid_by.name }}</td>
                    <td>
                        {% if expense.paid_by.id == user.id %}
                            {{ friend.name }} owes you ₹{{ expense.amount_owed }}
                        {% else %}
                            You owe {{ friend.name }} ₹{{ expense.amount_owed }}
                        {% endif %}
                    </td> 
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7" class="text-center">No Expenses added</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}